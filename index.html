<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no" />
<title>Happy Birthday ‚Äî Ahmed</title>
<style>
  /* === Reset & root === */
  :root {
    --white: #fff;
    --black: #000;
    --bg-white: #fff;
    --bg-black: #000;
    --text-black: #111;
    --text-white: #fff;
    --bubble-white: rgba(255,255,255,0.95);
    --bubble-yellow: rgba(255,230,120,0.95);
    --shadow: 0 6px 18px rgba(0,0,0,0.45);
    --font-sans: "Helvetica Neue", Arial, "Noto Sans", sans-serif;
  }
  html, body {
    margin:0; padding:0;
    height:100%;
    font-family: var(--font-sans);
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    overflow: hidden;
  }
  body {
    background: var(--bg-white);
    color: var(--text-black);
  }
  img {
    -webkit-user-select:none;
    user-select:none;
    -webkit-touch-callout:none;
    pointer-events:none;
    user-drag:none;
    -webkit-user-drag:none;
    display:block;
  }
  /* ==== Horiz screen forced on mobile ==== */
  #landscape-warning {
    position: fixed;
    inset:0;
    background: var(--bg-black);
    color: var(--text-white);
    font-size: 2rem;
    font-weight: 700;
    font-family: var(--font-sans);
    display: flex;
    align-items: center;
    justify-content: center;
    text-align: center;
    padding: 1rem;
    z-index: 10000;
    opacity: 0;
    pointer-events: none;
    transition: opacity 0.3s ease;
  }
  #landscape-warning.visible {
    opacity: 1;
    pointer-events: auto;
  }
  /* We rotate the main #app container on portrait mobiles */
  #app {
    width: 100vw;
    height: 100vh;
    position: relative;
    overflow: hidden;
    background: var(--bg-white);
    transition: background 0.3s ease;
  }
  /* on portrait phones, rotate app -90deg to simulate horizontal */
  @media (orientation: portrait) and (max-width: 768px) {
    #app {
      width: 100vh;
      height: 100vw;
      transform: rotate(-90deg) translateX(calc(-100vh + 100vw));
      transform-origin: top left;
      position: absolute;
      top: 0; left: 0;
      background: var(--bg-white);
    }
  }

  /* === Common fade in/out animation === */
  .fade-in {
    opacity: 1 !important;
    pointer-events: auto !important;
    transition: opacity 1s ease;
  }
  .fade-out {
    opacity: 0 !important;
    pointer-events: none !important;
    transition: opacity 1s ease;
  }
  .hidden {
    opacity: 0;
    pointer-events: none;
  }

  /* === Sections: full screen flex container === */
  section {
    position: absolute;
    inset: 0;
    display: flex;
    align-items: center;
    justify-content: center;
    flex-direction: column;
    opacity: 0;
    pointer-events: none;
  }
  section.active {
    opacity: 1;
    pointer-events: auto;
    transition: opacity 1s ease;
  }

  /* ==== 0 Landscape Warning ==== */
  #landscape-warning {
    font-size: 2rem;
    font-weight: 700;
    letter-spacing: 0.04em;
  }

  /* ==== 1 image2 section ==== */
  #image2-section {
    background: var(--bg-white);
  }
  #image2-section img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    mask-image: linear-gradient(135deg, transparent 0%, black 100%);
    -webkit-mask-image: linear-gradient(135deg, transparent 0%, black 100%);
    opacity: 0;
  }

  /* ==== 2 image3 section ==== */
  #image3-section {
    background: var(--bg-white);
    position: relative;
    display: flex;
    justify-content: flex-end;
    align-items: center;
  }
  #image3-section img {
    max-height: 80vh;
    max-width: 25vw;
    object-fit: contain;
    opacity: 0;
    transition: opacity 2s ease;
  }
  #image3-section img.visible {
    opacity: 1;
  }

  /* ==== 3 loading section ==== */
  #loading-section {
    background: var(--bg-white);
    display: grid;
    grid-template-columns: repeat(45, 1fr);
    grid-auto-rows: 40px;
    gap: 4px 6px;
    justify-content: center;
    align-content: center;
    padding: 1rem;
    max-width: 960px;
    opacity: 0;
    pointer-events: none;
  }
  .loading-img {
    width: 32px;
    height: 40px;
    opacity: 0;
    transition: opacity 0.3s ease;
  }
  .loading-img.visible {
    opacity: 1;
  }

  /* ==== 4 image1 section ==== */
  #image1-section {
    background: var(--bg-white);
    position: relative;
  }
  #image1-section img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    mask-image: linear-gradient(135deg, transparent 0%, black 100%);
    -webkit-mask-image: linear-gradient(135deg, transparent 0%, black 100%);
    opacity: 0;
  }

  /* ==== 5 bubbles section ==== */
  #bubbles-section {
    position: relative;
    background: var(--bg-white);
    display: flex;
    justify-content: flex-start;
    align-items: flex-start;
    padding-left: 50vw;
    flex-direction: column;
    gap: 0.75rem;
    max-width: 45vw;
    margin-left: auto;
  }
  .bubble {
    background: var(--bubble-white);
    box-shadow: var(--shadow);
    border-radius: 18px;
    padding: 12px 16px;
    font-size: 1rem;
    line-height: 1.3;
    color: var(--text-black);
    opacity: 0;
    transform: translateX(-20px);
    transition: opacity 0.7s ease, transform 0.7s ease;
  }
  .bubble.yellow {
    background: var(--bubble-yellow);
  }
  .bubble.visible {
    opacity: 1;
    transform: translateX(0);
  }

  /* ==== 6 xD section ==== */
  #xd-section {
    background: var(--bg-black);
    color: var(--text-white);
    font-family: 'Comic Sans MS', cursive, sans-serif;
    font-size: 12vw;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    opacity: 0;
    pointer-events: none;
    transition: opacity 1s ease;
  }
  #xd-section.active {
    opacity: 1;
    pointer-events: auto;
  }
  #xd-section .xd-text {
    user-select:none;
  }
  #xd-section .rate-text {
    margin-top: 1rem;
    font-size: 2rem;
    font-weight: 600;
  }
  /* ==== 7 rating stars ==== */
  #rating {
    margin-top: 1rem;
    display: flex;
    gap: 10px;
  }
  .star {
    font-size: 3rem;
    cursor: pointer;
    color: #444;
    user-select:none;
    transition: color 0.3s ease;
  }
  .star.hover, .star.selected {
    color: gold;
    text-shadow: 0 0 5px #ffcc33;
  }
  /* ==== 8 thank you section ==== */
  #thankyou-section {
    position: absolute;
    inset:0;
    background: var(--bg-black);
    color: var(--text-white);
    font-family: var(--font-sans);
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1.8rem;
    text-align: center;
    padding: 1rem;
    opacity: 0;
    pointer-events: none;
    transition: opacity 1s ease;
  }
  #thankyou-section.visible {
    opacity: 1;
    pointer-events: auto;
  }

  /* Keyframes for diagonal fade in image2 */
  @keyframes fadeInDiagonal {
    0% {
      mask-position: 100% 0%;
      opacity: 0;
    }
    100% {
      mask-position: 0% 100%;
      opacity: 1;
    }
  }
</style>
</head>
<body>

<div id="landscape-warning" role="alert" aria-live="assertive">
  Please rotate your device to landscape mode for the best experience.
</div>

<div id="app">

  <!-- 1 image2 section -->
  <section id="image2-section" aria-label="Birthday cover image" role="img" aria-live="polite" aria-atomic="true" class="active">
    <img src="image2.jpg" alt="Birthday cover" draggable="false" />
  </section>

  <!-- 2 image3 section -->
  <section id="image3-section" aria-label="Arrow indicator" role="img" aria-live="polite" aria-atomic="true">
    <img src="image3.png" alt="Arrow pointing right" draggable="false" />
  </section>

  <!-- 3 loading section -->
  <section id="loading-section" aria-label="Loading animation" role="img" aria-live="polite" aria-atomic="true">
    <!-- Will be populated by JS -->
  </section>

  <!-- 4 image1 section -->
  <section id="image1-section" aria-label="Background image" role="img" aria-live="polite" aria-atomic="true">
    <img src="image1.jpg" alt="Background image" draggable="false" />
  </section>

  <!-- 5 bubbles section -->
  <section id="bubbles-section" aria-live="polite" aria-atomic="true" aria-label="Messages">
    <div class="bubble white">Heyyy Ahmed, happy birthday to you! ü•≥</div>
    <div class="bubble yellow">If I could give you something today, it would be a quiet moment where nothing hurts and presses you.</div>
    <div class="bubble white">I see how much you‚Äôre carrying, and I respect you for that!</div>
    <div class="bubble yellow">I hope this year brings you more ease so that you can breathe. ü´Ç</div>
    <div class="bubble white">Remember! You can always be yourself with me! Lots of love! ü•∞</div>
  </section>

  <!-- 6 xD section -->
  <section id="xd-section" aria-live="polite" aria-atomic="true" aria-hidden="true" hidden>
    <div class="xd-text">xD</div>
    <div class="rate-text">Rate</div>
    <div id="rating" role="radiogroup" aria-label="Star rating">
      <span class="star" role="radio" aria-checked="false" tabindex="0" data-value="1" aria-label="1 star">‚òÖ</span>
      <span class="star" role="radio" aria-checked="false" tabindex="-1" data-value="2" aria-label="2 stars">‚òÖ</span>
      <span class="star" role="radio" aria-checked="false" tabindex="-1" data-value="3" aria-label="3 stars">‚òÖ</span>
      <span class="star" role="radio" aria-checked="false" tabindex="-1" data-value="4" aria-label="4 stars">‚òÖ</span>
      <span class="star" role="radio" aria-checked="false" tabindex="-1" data-value="5" aria-label="5 stars">‚òÖ</span>
    </div>
  </section>

  <!-- 8 thank you section -->
  <section id="thankyou-section" role="alert" aria-live="assertive" aria-atomic="true" aria-hidden="true" hidden>
    ‚òùüèªü§ì thanks for your 5 stars ‚ù§Ô∏è<br>
    (knew you would do this xD)
  </section>

</div>

<script>
(() => {
  const landscapeWarning = document.getElementById('landscape-warning');
  const app = document.getElementById('app');

  // Sections
  const sections = {
    image2: document.getElementById('image2-section'),
    image3: document.getElementById('image3-section'),
    loading: document.getElementById('loading-section'),
    image1: document.getElementById('image1-section'),
    bubbles: document.getElementById('bubbles-section'),
    xd: document.getElementById('xd-section'),
    thankyou: document.getElementById('thankyou-section'),
  };

  // Handle landscape warning display
  function checkOrientation() {
    if(window.innerHeight > window.innerWidth) {
      landscapeWarning.classList.add('visible');
    } else {
      landscapeWarning.classList.remove('visible');
    }
  }
  window.addEventListener('resize', checkOrientation);
  checkOrientation();

  // Animate image2 fade diagonal in (left-bottom to right-top)
  function animateImage2() {
    return new Promise(resolve => {
      const img = sections.image2.querySelector('img');
      img.style.opacity = '1';
      img.style.animation = 'fadeInDiagonal 5s forwards';

      setTimeout(() => {
        resolve();
      }, 5200);
    });
  }

  // Animate image3 fade in/out on right side
  function animateImage3() {
    return new Promise(resolve => {
      const img = sections.image3.querySelector('img');
      sections.image3.classList.add('active');
      img.style.opacity = '0';
      // fade in 2s
      setTimeout(() => {
        img.classList.add('visible');
      }, 50);

      // show 3s then fade out 2s
      setTimeout(() => {
        img.classList.remove('visible');
      }, 3200);

      // After fade out, hide section
      setTimeout(() => {
        sections.image3.classList.remove('active');
        resolve();
      }, 5200);
    });
  }

  // Loading section: create "loading..." formed by repeated image4 tiles
  // Because image4 is missing, let's simulate with colored squares as placeholders
  // We'll create a simple text animation with colored squares
  function createLoadingGrid() {
    const loadingSection = sections.loading;
    loadingSection.innerHTML = '';
    loadingSection.classList.add('active');
    loadingSection.style.opacity = '1';
    const text = 'loading...';
    const totalCols = text.length * 6; // 5 cols +1 space per letter approx.

    loadingSection.style.gridTemplateColumns = `repeat(${totalCols}, 32px)`;

    // For simplicity, create colored blocks for each letter (no real font mapping)
    for (let i = 0; i < totalCols; i++) {
      const div = document.createElement('div');
      div.classList.add('loading-img');
      div.style.backgroundColor = `hsl(${(i*30)%360}, 70%, 60%)`;
      loadingSection.appendChild(div);
      setTimeout(() => {
        div.classList.add('visible');
      }, i * 80);
    }
  }

  function animateLoading() {
    return new Promise(resolve => {
      createLoadingGrid();
      // Show loading for 5 seconds
      setTimeout(() => {
        sections.loading.style.opacity = '0';
        sections.loading.classList.remove('active');
        setTimeout(() => {
          resolve();
        }, 1000);
      }, 5000);
    });
  }

  // Animate image1 fade diagonal in (right-top to left-bottom)
  function animateImage1() {
    return new Promise(resolve => {
      const img = sections.image1.querySelector('img');
      sections.image1.classList.add('active');
      img.style.opacity = '0';
      img.style.transition = 'opacity 4s ease';
      setTimeout(() => {
        img.style.opacity = '1';
      }, 50);
      setTimeout(() => {
        resolve();
      }, 4200);
    });
  }

  // Animate bubbles fade in one by one with color pattern
  function animateBubbles() {
    return new Promise(resolve => {
      const bubbles = [...sections.bubbles.querySelectorAll('.bubble')];
      let i = 0;

      function showNextBubble() {
        if (i >= bubbles.length) {
          resolve();
          return;
        }
        bubbles[i].classList.add('visible');
        i++;
        setTimeout(showNextBubble, 1500);
      }
      showNextBubble();
    });
  }

  // Show xd section with rating stars
  function showXDSection() {
    return new Promise(resolve => {
      sections.xd.hidden = false;
      sections.xd.setAttribute('aria-hidden', 'false');
      sections.xd.classList.add('active');

      const stars = [...sections.xd.querySelectorAll('.star')];
      let selected = 0;

      stars.forEach((star, index) => {
        star.addEventListener('mouseover', () => {
          stars.forEach((s,i) => {
            s.classList.toggle('hover', i <= index);
          });
        });
        star.addEventListener('mouseout', () => {
          stars.forEach((s,i) => {
            s.classList.remove('hover');
          });
        });
        star.addEventListener('click', () => {
          selected = index + 1;
          stars.forEach((s,i) => {
            s.classList.toggle('selected', i < selected);
            s.setAttribute('aria-checked', i < selected ? 'true' : 'false');
            s.setAttribute('tabindex', i === selected - 1 ? '0' : '-1');
          });
          // Show thank you section after rating
          showThankYouSection().then(() => {
            resolve();
          });
        });
        star.addEventListener('keydown', (e) => {
          if (e.key === 'Enter' || e.key === ' ') {
            e.preventDefault();
            star.click();
          }
          if (e.key === 'ArrowRight') {
            e.preventDefault();
            let next = index + 1;
            if (next >= stars.length) next = 0;
            stars[next].focus();
          }
          if (e.key === 'ArrowLeft') {
            e.preventDefault();
            let prev = index -1;
            if (prev < 0) prev = stars.length -1;
            stars[prev].focus();
          }
        });
      });
    });
  }

  // Show thank you message after rating
  function showThankYouSection() {
    return new Promise(resolve => {
      sections.xd.classList.remove('active');
      sections.xd.hidden = true;
      sections.xd.setAttribute('aria-hidden', 'true');

      sections.thankyou.hidden = false;
      sections.thankyou.setAttribute('aria-hidden', 'false');
      sections.thankyou.classList.add('visible');

      setTimeout(() => {
        resolve();
      }, 4000);
    });
  }

  // Main animation flow
  async function main() {
    // Start with image2 section visible
    await animateImage2();
    await animateImage3();
    await animateLoading();
    await animateImage1();
    await animateBubbles();
    await showXDSection();
    // Thank you section shown in showXDSection promise chain
  }

  main();

})();
</script>

</body>
</html>
