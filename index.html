<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no" />
<title>Happy Birthday ‚Äî Ahmed</title>
<style>
  /* === Reset & root === */
  :root {
    --white: #fff;
    --black: #000;
    --bg-white: #fff;
    --bg-black: #000;
    --text-black: #111;
    --text-white: #fff;
    --bubble-white: rgba(255,255,255,0.95);
    --bubble-yellow: rgba(255,230,120,0.95);
    --shadow: 0 6px 18px rgba(0,0,0,0.45);
    --font-sans: "Helvetica Neue", Arial, "Noto Sans", sans-serif;
    --font-mono: monospace;
  }
  html, body {
    margin:0; padding:0;
    height:100%;
    font-family: var(--font-sans);
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    overflow: hidden;
  }
  body {
    background: var(--bg-white);
    color: var(--text-black);
  }
  img {
    -webkit-user-select:none;
    user-select:none;
    -webkit-touch-callout:none;
    pointer-events:none;
    user-drag:none;
    -webkit-user-drag:none;
    display:block;
  }
  /* Disable pinch zoom */
  @viewport {
    zoom: 1.0;
  }
  @-ms-viewport {
    width: device-width;
  }

  /* ==== Horiz screen forced on mobile ==== */
  body, html {
    touch-action: none;
  }
  #landscape-warning {
    position: fixed;
    inset:0;
    background: var(--bg-black);
    color: var(--text-white);
    font-size: 1.5rem;
    font-weight: 600;
    font-family: var(--font-sans);
    display: flex;
    align-items: center;
    justify-content: center;
    text-align: center;
    padding: 1rem;
    z-index: 10000;
    opacity: 0;
    pointer-events: none;
    transition: opacity 0.3s ease;
  }
  #landscape-warning.visible {
    opacity: 1;
    pointer-events: auto;
  }
  /* We rotate the main #app container on portrait mobiles */
  #app {
    width: 100vw;
    height: 100vh;
    position: relative;
    overflow: hidden;
    background: var(--bg-white);
    transition: background 0.3s ease;
  }
  /* on portrait phones, rotate app -90deg to simulate horizontal */
  @media (orientation: portrait) and (max-width: 768px) {
    #app {
      width: 100vh;
      height: 100vw;
      transform: rotate(-90deg) translateX(calc(-100vh + 100vw));
      transform-origin: top left;
      position: absolute;
      top: 0; left: 0;
      background: var(--bg-white);
    }
  }

  /* === Common fade in/out animation === */
  .fade-in {
    opacity: 1 !important;
    pointer-events: auto !important;
    transition: opacity 1s ease;
  }
  .fade-out {
    opacity: 0 !important;
    pointer-events: none !important;
    transition: opacity 1s ease;
  }
  .hidden {
    opacity: 0;
    pointer-events: none;
  }

  /* === Sections: full screen flex container === */
  section {
    position: absolute;
    inset: 0;
    display: flex;
    align-items: center;
    justify-content: center;
    flex-direction: column;
    opacity: 0;
    pointer-events: none;
  }
  section.active {
    opacity: 1;
    pointer-events: auto;
    transition: opacity 1s ease;
  }

  /* ==== 0 Landscape Warning ==== */
  #landscape-warning {
    font-size: 2rem;
    font-weight: 700;
    letter-spacing: 0.04em;
  }

  /* ==== 1 image2 section ==== */
  #image2-section {
    background: var(--bg-white);
  }
  #image2-section img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    /* we will mask fade from left-bottom to right-top with CSS mask-image */
    mask-image: linear-gradient(135deg, transparent 0%, black 100%);
    -webkit-mask-image: linear-gradient(135deg, transparent 0%, black 100%);
    animation: fadeInDiagonal 5s forwards;
  }
  @keyframes fadeInDiagonal {
    0% {
      mask-image: linear-gradient(135deg, transparent 0%, transparent 0%);
      -webkit-mask-image: linear-gradient(135deg, transparent 0%, transparent 0%);
      opacity: 0;
    }
    100% {
      mask-image: linear-gradient(135deg, transparent 0%, black 100%);
      -webkit-mask-image: linear-gradient(135deg, transparent 0%, black 100%);
      opacity: 1;
    }
  }

  /* ==== 2 image3 section ==== */
  #image3-section {
    background: var(--bg-white);
    position: relative;
    display: flex;
    justify-content: flex-end;
    align-items: center;
  }
  #image3-section img {
    max-height: 80vh;
    max-width: 25vw;
    object-fit: contain;
    opacity: 0;
    transition: opacity 2s ease;
  }
  #image3-section img.visible {
    opacity: 1;
  }

  /* ==== 3 loading section ==== */
  #loading-section {
    background: var(--bg-white);
    display: grid;
    grid-template-columns: repeat(8, 1fr);
    grid-auto-rows: 40px;
    gap: 4px 6px;
    justify-content: center;
    align-content: center;
    padding: 1rem;
    max-width: 320px;
  }
  .loading-img {
    width: 32px;
    height: 40px;
    opacity: 0;
    transition: opacity 0.3s ease;
  }
  .loading-img.visible {
    opacity: 1;
  }

  /* ==== 4 image1 section ==== */
  #image1-section {
    background: var(--bg-white);
    position: relative;
  }
  #image1-section img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    mask-image: linear-gradient(135deg, transparent 0%, black 100%);
    -webkit-mask-image: linear-gradient(135deg, transparent 0%, black 100%);
    animation: fadeInDiagonal 4s forwards;
  }

  /* ==== 5 bubbles section ==== */
  #bubbles-section {
    position: relative;
    background: var(--bg-white);
    display: flex;
    justify-content: flex-start;
    align-items: flex-start;
    padding-left: 50vw;
    flex-direction: column;
    gap: 0.75rem;
    max-width: 45vw;
    margin-left: auto;
  }
  .bubble {
    background: var(--bubble-white);
    box-shadow: var(--shadow);
    border-radius: 18px;
    padding: 12px 16px;
    font-size: 1rem;
    line-height: 1.3;
    color: var(--text-black);
    opacity: 0;
    transform: translateX(-20px);
    transition: opacity 0.7s ease, transform 0.7s ease;
  }
  .bubble.yellow {
    background: var(--bubble-yellow);
  }
  .bubble.visible {
    opacity: 1;
    transform: translateX(0);
  }

  /* ==== 6 xD section ==== */
  #xd-section {
    background: var(--bg-black);
    color: var(--text-white);
    font-family: 'Comic Sans MS', cursive, sans-serif;
    font-size: 12vw;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
  }
  #xd-section .xd-text {
    user-select:none;
  }
  #xd-section .rate-text {
    margin-top: 1rem;
    font-size: 2rem;
    font-weight: 600;
  }
  /* ==== 7 rating stars ==== */
  #rating {
    margin-top: 1rem;
    display: flex;
    gap: 10px;
  }
  .star {
    font-size: 3rem;
    cursor: pointer;
    color: #444;
    user-select:none;
    transition: color 0.3s ease;
  }
  .star.hover, .star.selected {
    color: gold;
    text-shadow: 0 0 5px #ffcc33;
  }
  /* ==== 8 thank you section ==== */
  #thankyou-section {
    position: absolute;
    inset:0;
    background: var(--bg-black);
    color: var(--text-white);
    font-family: var(--font-sans);
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1.8rem;
    text-align: center;
    padding: 1rem;
    opacity: 0;
    pointer-events: none;
    transition: opacity 1s ease;
  }
  #thankyou-section.visible {
    opacity: 1;
    pointer-events: auto;
  }
</style>
</head>
<body>

<div id="landscape-warning" role="alert" aria-live="assertive">
  Please rotate your device to landscape mode for the best experience.
</div>

<div id="app">

  <!-- 0 Landscape Warning managed by JS -->

  <!-- 1 image2 section -->
  <section id="image2-section" aria-label="Birthday cover image" role="img" aria-live="polite" aria-atomic="true">
    <img src="image2.jpg" alt="Birthday cover" draggable="false" />
  </section>

  <!-- 2 image3 section -->
  <section id="image3-section" aria-label="Arrow indicator" role="img" aria-live="polite" aria-atomic="true">
    <img src="image3.png" alt="Arrow pointing right" draggable="false" />
  </section>

  <!-- 3 loading section -->
  <section id="loading-section" aria-label="Loading animation" role="img" aria-live="polite" aria-atomic="true" style="opacity:0;pointer-events:none;">
    <!-- 64 spots for loading... arranged as 8 columns x 8 rows grid (can be adjusted) -->
  </section>

  <!-- 4 image1 section -->
  <section id="image1-section" aria-label="Background image" role="img" aria-live="polite" aria-atomic="true">
    <img src="image1.jpg" alt="Background image" draggable="false" />
  </section>

  <!-- 5 bubbles section -->
  <section id="bubbles-section" aria-live="polite" aria-atomic="true" aria-label="Messages">
    <div class="bubble white">Heyyy Ahmed, happy birthday to you! ü•≥</div>
    <div class="bubble yellow">If I could give you something today, it would be a quiet moment where nothing hurts and presses you.</div>
    <div class="bubble white">I see how much you‚Äôre carrying, and I respect you for that!</div>
    <div class="bubble yellow">I hope this year brings you more ease so that you can breathe. ü´Ç</div>
    <div class="bubble white">Remember! You can always be yourself with me! Lots of love! ü•∞</div>
  </section>

  <!-- 6 xD section -->
  <section id="xd-section" aria-live="polite" aria-atomic="true" hidden>
    <div class="xd-text">xD</div>
    <div class="rate-text">Rate</div>
    <div id="rating" role="radiogroup" aria-label="Star rating">
      <span class="star" role="radio" aria-checked="false" tabindex="0" data-value="1" aria-label="1 star">‚òÖ</span>
      <span class="star" role="radio" aria-checked="false" tabindex="-1" data-value="2" aria-label="2 stars">‚òÖ</span>
      <span class="star" role="radio" aria-checked="false" tabindex="-1" data-value="3" aria-label="3 stars">‚òÖ</span>
      <span class="star" role="radio" aria-checked="false" tabindex="-1" data-value="4" aria-label="4 stars">‚òÖ</span>
      <span class="star" role="radio" aria-checked="false" tabindex="-1" data-value="5" aria-label="5 stars">‚òÖ</span>
    </div>
  </section>

  <!-- 8 thank you section -->
  <section id="thankyou-section" role="alert" aria-live="assertive" aria-atomic="true" hidden>
    ‚òùüèªü§ì thanks for your 5 stars ‚ù§Ô∏è<br>
    (knew you would do this xD)
  </section>

</div>

<script>
(() => {
  const app = document.getElementById('app');
  const landscapeWarning = document.getElementById('landscape-warning');

  // Sections
  const sections = {
    image2: document.getElementById('image2-section'),
    image3: document.getElementById('image3-section'),
    loading: document.getElementById('loading-section'),
    image1: document.getElementById('image1-section'),
    bubbles: document.getElementById('bubbles-section'),
    xd: document.getElementById('xd-section'),
    thankyou: document.getElementById('thankyou-section'),
  };

  // Loading images setup for loading section
  // "loading..." spelled out in 8x8 grid using image4.jpg tiles.
  // We'll manually map positions for the letters l o a d i n g . . . (total 9 chars including dots)
  // We'll create a pixel-art style "loading..." shape with image4 repeated at positions forming the letters.

  const loadingText = "loading...";
  // We'll build a simple 8x8 pixel font for each letter with approximate pattern.
  // For brevity, I define a very simple pattern: each letter block is 5x7 grid of dots.
  // We arrange the letters horizontally with 1 column spacing between letters.
  // Each 'pixel' will be one image4.

  // We'll do a very simple pixel font (5x7) for letters l,o,a,d,i,n,g and dot.
  // For simplicity, define pixel map for each letter (1 = show image, 0 = blank)
  // Each letter is 5 columns x 7 rows
  
  const font5x7 = {
    "l": [
      [1,0,0,0,0],
      [1,0,0,0,0],
      [1,0,0,0,0],
      [1,0,0,0,0],
      [1,0,0,0,0],
      [1,0,0,0,0],
      [1,1,1,1,0],
    ],
    "o": [
      [0,1,1,1,0],
      [1,0,0,0,1],
      [1,0,0,1,1],
      [1,0,0,0,1],
      [1,0,0,0,1],
      [1,0,0,0,1],
      [0,1,1,1,0],
    ],
    "a": [
      [0,1,1,1,0],
      [1,0,0,0,1],
      [1,0,0,0,1],
      [1,1,1,1,1],
      [1,0,0,0,1],
      [1,0,0,0,1],
      [1,0,0,0,1],
    ],
    "d": [
      [1,1,1,0,0],
      [1,0,0,1,0],
      [1,0,0,0,1],
      [1,0,0,0,1],
      [1,0,0,0,1],
      [1,0,0,1,0],
      [1,1,1,0,0],
    ],
    "i": [
      [0,1,0,0,0],
      [0,0,0,0,0],
      [0,1,0,0,0],
      [0,1,0,0,0],
      [0,1,0,0,0],
      [0,1,0,0,0],
      [0,1,0,0,0],
    ],
    "n": [
      [1,0,0,0,1],
      [1,1,0,0,1],
      [1,0,1,0,1],
      [1,0,0,1,1],
      [1,0,0,0,1],
      [1,0,0,0,1],
      [1,0,0,0,1],
    ],
    "g": [
      [0,1,1,1,0],
      [1,0,0,0,1],
      [1,0,0,0,1],
      [1,0,1,1,1],
      [1,0,0,0,1],
      [1,0,0,0,1],
      [0,1,1,1,0],
    ],
    ".": [
      [0,0,0,0,0],
      [0,0,0,0,0],
      [0,0,0,0,0],
      [0,0,0,0,0],
      [0,0,0,0,0],
      [0,1,1,0,0],
      [0,1,1,0,0],
    ],
  };

  // Each letter width: 5 columns, 7 rows
  // Spacing between letters: 1 column (blank)
  // We will generate the grid dynamically into #loading-section container.

  const loadingSection = sections.loading;

  // Calculate total columns needed
  const letters = loadingText.split('');
  const letterWidth = 5;
  const letterHeight = 7;
  const
